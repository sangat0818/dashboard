"use strict";(self.webpackChunkbiscuit_admin_dashboard=self.webpackChunkbiscuit_admin_dashboard||[]).push([[455],{1087:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(9992),s=r(579);const i=(0,a.A)([(0,s.jsx)("path",{d:"M5 5h2v3h10V5h2v5h2V5c0-1.1-.9-2-2-2h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h6v-2H5zm7-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1"},"0"),(0,s.jsx)("path",{d:"M21 11.5 15.51 17l-3.01-3-1.5 1.5 4.51 4.5 6.99-7z"},"1")],"InventoryOutlined")},1455:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ve});var a=r(5043),s=r(5180),i=r(267),n=r(3969),o=r(1244),l=r(6128),d=r(3089),c=r(3849),h=r(5895),x=r(6020),u=r(2097),p=r(7873),m=r(8387),g=r(1807);var v=r(8128),A=r(1612),b=r(8301),y=r(7194),j=r(9857),f=r(6061);function w(e){return(0,f.Ay)("MuiToggleButtonGroup",e)}const C=(0,j.A)("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]);const $=a.createContext({});const B=a.createContext(void 0);function k(e){return(0,f.Ay)("MuiToggleButton",e)}const z=(0,j.A)("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]);var R=r(579);const T=(0,v.Ay)("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${C.grouped}`]:t.grouped},{[`& .${C.grouped}`]:t[`grouped${(0,y.A)(r.orientation)}`]},{[`& .${C.firstButton}`]:t.firstButton},{[`& .${C.lastButton}`]:t.lastButton},{[`& .${C.middleButton}`]:t.middleButton},t.root,"vertical"===r.orientation&&t.vertical,r.fullWidth&&t.fullWidth]}})((0,A.A)((e=>{let{theme:t}=e;return{display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius,variants:[{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${C.grouped}`]:{[`&.${C.selected} + .${C.grouped}.${C.selected}`]:{borderTop:0,marginTop:0}},[`& .${C.firstButton},& .${C.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${C.lastButton},& .${C.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},[`& .${C.lastButton}.${z.disabled},& .${C.middleButton}.${z.disabled}`]:{borderTop:"1px solid transparent"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"horizontal"},style:{[`& .${C.grouped}`]:{[`&.${C.selected} + .${C.grouped}.${C.selected}`]:{borderLeft:0,marginLeft:0}},[`& .${C.firstButton},& .${C.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${C.lastButton},& .${C.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},[`& .${C.lastButton}.${z.disabled},& .${C.middleButton}.${z.disabled}`]:{borderLeft:"1px solid transparent"}}}]}}))),M=a.forwardRef((function(e,t){const r=(0,b.b)({props:e,name:"MuiToggleButtonGroup"}),{children:s,className:i,color:n="standard",disabled:o=!1,exclusive:l=!1,fullWidth:d=!1,onChange:c,orientation:h="horizontal",size:x="medium",value:u,...p}=r,v={...r,disabled:o,fullWidth:d,orientation:h,size:x},A=(e=>{const{classes:t,orientation:r,fullWidth:a,disabled:s}=e,i={root:["root",r,a&&"fullWidth"],grouped:["grouped",`grouped${(0,y.A)(r)}`,s&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return(0,g.A)(i,w,t)})(v),j=a.useCallback(((e,t)=>{if(!c)return;const r=u&&u.indexOf(t);let a;u&&r>=0?(a=u.slice(),a.splice(r,1)):a=u?u.concat(t):[t],c(e,a)}),[c,u]),f=a.useCallback(((e,t)=>{c&&c(e,u===t?null:t)}),[c,u]),C=a.useMemo((()=>({className:A.grouped,onChange:l?f:j,value:u,size:x,fullWidth:d,color:n,disabled:o})),[A.grouped,l,f,j,u,x,d,n,o]),k=function(e){return a.Children.toArray(e).filter((e=>a.isValidElement(e)))}(s),z=k.length,M=e=>{const t=0===e,r=e===z-1;return t&&r?"":t?A.firstButton:r?A.lastButton:A.middleButton};return(0,R.jsx)(T,{role:"group",className:(0,m.A)(A.root,i),ref:t,ownerState:v,...p,children:(0,R.jsx)($.Provider,{value:C,children:k.map(((e,t)=>(0,R.jsx)(B.Provider,{value:M(t),children:e},t)))})})}));var S=r(4599),W=r(9826),I=r(9699),D=r(4412);function O(e,t){return void 0!==t&&void 0!==e&&(Array.isArray(t)?t.includes(e):e===t)}const N=(0,v.Ay)(I.A,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`size${(0,y.A)(r.size)}`]]}})((0,A.A)((e=>{let{theme:t}=e;return{...t.typography.button,borderRadius:(t.vars||t).shape.borderRadius,padding:11,border:`1px solid ${(t.vars||t).palette.divider}`,color:(t.vars||t).palette.action.active,[`&.${z.disabled}`]:{color:(t.vars||t).palette.action.disabled,border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,W.X4)(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{color:"standard"},style:{[`&.${z.selected}`]:{color:(t.vars||t).palette.text.primary,backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,W.X4)(t.palette.text.primary,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,W.X4)(t.palette.text.primary,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,W.X4)(t.palette.text.primary,t.palette.action.selectedOpacity)}}}}},...Object.entries(t.palette).filter((0,D.A)()).map((e=>{let[r]=e;return{props:{color:r},style:{[`&.${z.selected}`]:{color:(t.vars||t).palette[r].main,backgroundColor:t.vars?`rgba(${t.vars.palette[r].mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,W.X4)(t.palette[r].main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[r].mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,W.X4)(t.palette[r].main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette[r].mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,W.X4)(t.palette[r].main,t.palette.action.selectedOpacity)}}}}}})),{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{padding:7,fontSize:t.typography.pxToRem(13)}},{props:{size:"large"},style:{padding:15,fontSize:t.typography.pxToRem(15)}}]}}))),P=a.forwardRef((function(e,t){const{value:r,...s}=a.useContext($),i=a.useContext(B),n=(0,S.A)({...s,selected:O(e.value,r)},e),o=(0,b.b)({props:n,name:"MuiToggleButton"}),{children:l,className:d,color:c="standard",disabled:h=!1,disableFocusRipple:x=!1,fullWidth:u=!1,onChange:p,onClick:v,selected:A,size:j="medium",value:f,...w}=o,C={...o,color:c,disabled:h,disableFocusRipple:x,fullWidth:u,size:j},z=(e=>{const{classes:t,fullWidth:r,selected:a,disabled:s,size:i,color:n}=e,o={root:["root",a&&"selected",s&&"disabled",r&&"fullWidth",`size${(0,y.A)(i)}`,n]};return(0,g.A)(o,k,t)})(C),T=i||"";return(0,R.jsx)(N,{className:(0,m.A)(s.className,z.root,d,T),disabled:h,focusRipple:!x,ref:t,onClick:e=>{v&&(v(e,f),e.defaultPrevented)||p&&p(e,f)},onChange:p,value:f,ownerState:C,"aria-pressed":A,...w,children:l})}));var L=r(6154),H=r(3699),G=r(6529),V=r(8259),F=r(7443),E=r(756),X=r(6172),_=r(1341),Y=r(4375),J=r(2579),Z=r(5979),q=r(1087),K=r(8315),Q=r(3883),U=r(9992);const ee=(0,U.A)((0,R.jsx)("path",{d:"M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79zm9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75zM7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1"}),"PhoneOutlined"),te=(0,U.A)([(0,R.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7M7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.88-2.88 7.19-5 9.88C9.92 16.21 7 11.85 7 9"},"0"),(0,R.jsx)("circle",{cx:"12",cy:"9",r:"2.5"},"1")],"LocationOnOutlined");var re=r(3745);const ae=(0,U.A)((0,R.jsx)("path",{d:"M14.94 4.66h-4.72l2.36-2.36zm-4.69 14.71h4.66l-2.33 2.33zM6.1 6.27 1.6 17.73h1.84l.92-2.45h5.11l.92 2.45h1.84L7.74 6.27zm-1.13 7.37 1.94-5.18 1.94 5.18zm10.76 2.5h6.12v1.59h-8.53v-1.29l5.92-8.56h-5.88v-1.6h8.3v1.26z"}),"SortByAlpha");var se=r(3898),ie=r(64),ne=r(5272),oe=r(5472),le=r(6860),de=r(2316);function ce(e,t){const r=(0,de.a)(e,t?.in);return r.setDate(1),r.setHours(0,0,0,0),r}function he(e,t){const r=(0,de.a)(e,t?.in),a=r.getMonth();return r.setFullYear(r.getFullYear(),a+1,0),r.setHours(23,59,59,999),r}function xe(e,t,r){const a=+(0,de.a)(e,r?.in),[s,i]=[+(0,de.a)(t.start,r?.in),+(0,de.a)(t.end,r?.in)].sort(((e,t)=>e-t));return a>=s&&a<=i}var ue=r(6200),pe=r(8729),me=r(7151);function ge(e){if(!e)return null;if(e instanceof Date)return e;if(e.toDate)return e.toDate();const t=new Date(e);return isNaN(t)?null:t}const ve=()=>{const e=(0,i.A)(),t=(0,s.Zp)(),r=(0,s.zy)().state||{},{retailerId:m}=(0,s.g)(),{userProfile:g,loading:v}=(0,pe.A)(),[A,b]=(0,a.useState)(null),[y,j]=(0,a.useState)(!0),[f,w]=(0,a.useState)([]),[C,$]=(0,a.useState)([]),[B,k]=(0,a.useState)({}),[z,T]=(0,a.useState)({}),[S,W]=(0,a.useState)(""),[I,D]=(0,a.useState)("name"),[O,N]=(0,a.useState)("all"),[U,de]=(0,a.useState)({startDate:ce(new Date),endDate:he(new Date)}),[ve,Ae]=(0,a.useState)(0),[be,ye]=(0,a.useState)(10),[je,fe]=(0,a.useState)({open:!1,message:"",severity:"success"}),[we,Ce]=(0,a.useState)(!0),[$e,Be]=(0,a.useState)({});(0,a.useEffect)((()=>{Ce(!0),j(!0);(async()=>{try{const e=await(0,oe.x7)((0,oe.H9)(le.db,"retailers",m));if(!e.exists())return fe({open:!0,message:"Retailer not found",severity:"error"}),b(null),Ce(!1),void j(!1);b({id:e.id,...e.data()}),Ce(!1)}catch(e){fe({open:!0,message:e.message||"Error loading retailer",severity:"error"}),Ce(!1)}finally{j(!1)}})()}),[m]),(0,a.useEffect)((()=>{(async()=>{try{const e=(0,oe.rJ)(le.db,"products"),t=(await(0,oe.GG)(e)).docs.map((e=>({id:e.id,...e.data()}))).filter((e=>!1!==e.active));$(t);const r={};t.forEach((e=>{r[e.id]=e})),k(r)}catch(e){$([])}})()}),[]),(0,a.useEffect)((()=>{if(!A)return;j(!0);(async()=>{try{const e=A.visitIds||[];if(!Array.isArray(e)||0===e.length)return w([]),void j(!1);const t=(await Promise.all(e.map((e=>(0,oe.x7)((0,oe.H9)(le.db,"visits",e)))))).filter((e=>e.exists())).map((e=>{const t=e.data();return{...t,id:e.id,checkInTime:ge(t.checkInTime),checkOutTime:ge(t.checkOutTime)}}));w(t)}catch(e){fe({open:!0,message:e.message||"Error loading visits",severity:"error"})}finally{j(!1)}})()}),[A]);const ke=(0,a.useMemo)((()=>{if(g&&A)return(0,me.rv)(g,A)}),[g,A]),ze=(0,a.useMemo)((()=>{let e=[...f];if("month"===O)e=e.filter((e=>e.checkInTime&&xe(e.checkInTime,{start:U.startDate,end:U.endDate})));else if("today"===O){const t=new Date;t.setHours(0,0,0,0);const r=new Date(t);r.setDate(r.getDate()+1),e=e.filter((e=>e.checkInTime&&e.checkInTime>=t&&e.checkInTime<r))}switch(S&&(e=e.filter((e=>(e.notes||"").toLowerCase().includes(S.toLowerCase())))),I){case"name":e.sort(((e,t)=>(e.checkInTime||0)-(t.checkInTime||0)));break;case"recent":e.sort(((e,t)=>(t.checkInTime||0)-(e.checkInTime||0)))}return e}),[f,O,U,S,I]),Re=(0,a.useMemo)((()=>{const e=ve*be;return ze.slice(e,e+be)}),[ze,ve,be]);return v||we||void 0===ke?(0,R.jsx)(n.A,{sx:{p:3},children:(0,R.jsx)(o.A,{sx:{mb:4,borderRadius:2,boxShadow:e.shadows[2]},children:(0,R.jsxs)(l.A,{sx:{p:3},children:[(0,R.jsxs)(d.A,{container:!0,spacing:2,children:[(0,R.jsx)(d.A,{item:!0,xs:12,md:6,children:(0,R.jsx)(n.A,{sx:{display:"flex",alignItems:"center"},children:r.name?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(c.A,{variant:"circular",width:60,height:60,sx:{mr:2}}),(0,R.jsxs)(n.A,{children:[(0,R.jsx)(h.A,{variant:"h5",gutterBottom:!0,fontWeight:"bold",children:r.name}),(0,R.jsx)(h.A,{variant:"body2",color:"text.secondary",children:r.phoneNumber}),(0,R.jsx)(h.A,{variant:"body2",color:"text.secondary",children:r.address})]})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(c.A,{variant:"circular",width:60,height:60,sx:{mr:2}}),(0,R.jsxs)(n.A,{sx:{flex:1},children:[(0,R.jsx)(c.A,{variant:"text",width:180,height:32,sx:{mb:1}}),(0,R.jsx)(c.A,{variant:"text",width:120,height:20,sx:{mb:.5}}),(0,R.jsx)(c.A,{variant:"text",width:100,height:20})]})]})})}),(0,R.jsx)(d.A,{item:!0,xs:12,md:6,children:(0,R.jsx)(n.A,{sx:{display:"flex",justifyContent:{xs:"flex-start",md:"flex-end"},gap:3,mt:{xs:2,md:0}},children:(0,R.jsxs)(n.A,{sx:{textAlign:{xs:"left",md:"center"}},children:[(0,R.jsx)(c.A,{variant:"text",width:80,height:36}),(0,R.jsx)(c.A,{variant:"text",width:60,height:20})]})})})]}),(0,R.jsxs)(n.A,{sx:{mt:4,mb:4},children:[(0,R.jsxs)(n.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"space-between",gap:2,mb:2},children:[(0,R.jsxs)(n.A,{children:[(0,R.jsxs)(h.A,{variant:"h6",fontWeight:"bold",sx:{mb:2,display:"flex",alignItems:"center"},children:[(0,R.jsx)(Z.A,{sx:{mr:1}})," Visit History"]}),(0,R.jsx)(c.A,{variant:"rectangular",width:180,height:36,sx:{mb:2,borderRadius:2}})]}),(0,R.jsxs)(n.A,{sx:{display:"flex",gap:2,flexWrap:"wrap",alignItems:"center"},children:[(0,R.jsx)(c.A,{variant:"rectangular",width:200,height:36,sx:{borderRadius:2}}),(0,R.jsx)(c.A,{variant:"rectangular",width:120,height:36,sx:{borderRadius:2}})]})]}),(0,R.jsxs)(n.A,{sx:{mt:2,display:"flex",flexWrap:"wrap",gap:2},children:[(0,R.jsx)(c.A,{variant:"rectangular",width:160,height:36,sx:{borderRadius:2}}),(0,R.jsx)(c.A,{variant:"rectangular",width:160,height:36,sx:{borderRadius:2}})]})]}),(0,R.jsxs)(n.A,{children:[(0,R.jsxs)(h.A,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:[(0,R.jsx)(q.A,{sx:{mr:1,verticalAlign:"text-bottom"}}),"Visit Records"]}),(0,R.jsx)(x.A,{sx:{mt:2,mb:1,borderRadius:1}})]})]})})}):!1===ke?(0,R.jsxs)(n.A,{sx:{p:4,textAlign:"center"},children:[(0,R.jsx)(h.A,{variant:"h6",color:"error",children:"You are not authorized to view this retailer's data."}),(0,R.jsx)(u.A,{variant:"contained",onClick:()=>t(-1),sx:{mt:2},startIcon:(0,R.jsx)(K.A,{}),children:"Back"})]}):(0,R.jsx)(n.A,{sx:{p:3},children:(0,R.jsx)(o.A,{sx:{mb:4,borderRadius:2,boxShadow:e.shadows[2]},children:(0,R.jsxs)(l.A,{sx:{p:3},children:[(0,R.jsxs)(d.A,{container:!0,spacing:2,children:[(0,R.jsx)(d.A,{item:!0,xs:12,md:6,children:(0,R.jsx)(n.A,{sx:{display:"flex",alignItems:"center"},children:we?r.name?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(c.A,{variant:"circular",width:60,height:60,sx:{mr:2}}),(0,R.jsxs)(n.A,{children:[(0,R.jsx)(h.A,{variant:"h5",gutterBottom:!0,fontWeight:"bold",children:r.name}),(0,R.jsx)(h.A,{variant:"body2",color:"text.secondary",children:r.phoneNumber}),(0,R.jsx)(h.A,{variant:"body2",color:"text.secondary",children:r.address})]})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(c.A,{variant:"circular",width:60,height:60,sx:{mr:2}}),(0,R.jsxs)(n.A,{sx:{flex:1},children:[(0,R.jsx)(c.A,{variant:"text",width:180,height:32,sx:{mb:1}}),(0,R.jsx)(c.A,{variant:"text",width:120,height:20,sx:{mb:.5}}),(0,R.jsx)(c.A,{variant:"text",width:100,height:20})]})]}):A?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(p.A,{sx:{bgcolor:"rgba(233, 30, 99, 0.1)",color:e.palette.secondary.main,width:60,height:60,mr:2,fontSize:"1.5rem"},children:(0,R.jsx)(Q.A,{sx:{fontSize:30}})}),(0,R.jsxs)(n.A,{children:[(0,R.jsx)(h.A,{variant:"h5",gutterBottom:!0,fontWeight:"bold",children:A.name}),(0,R.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",mb:.5},children:[(0,R.jsx)(ee,{sx:{fontSize:18,mr:1,color:"text.secondary"}}),(0,R.jsx)(h.A,{variant:"body2",color:"text.secondary",children:A.phone||"No phone number"})]}),(0,R.jsxs)(n.A,{sx:{display:"flex",alignItems:"center"},children:[(0,R.jsx)(te,{sx:{fontSize:18,mr:1,color:"text.secondary"}}),(0,R.jsx)(h.A,{variant:"body2",color:"text.secondary",children:A.address||"No address"})]})]})]}):null})}),(0,R.jsx)(d.A,{item:!0,xs:12,md:6,children:(0,R.jsx)(n.A,{sx:{display:"flex",justifyContent:{xs:"flex-start",md:"flex-end"},gap:3,mt:{xs:2,md:0}},children:(0,R.jsxs)(n.A,{sx:{textAlign:{xs:"left",md:"center"}},children:[(0,R.jsx)(h.A,{variant:"h4",fontWeight:"bold",color:e.palette.secondary.main,children:ze.length}),(0,R.jsx)(h.A,{variant:"body2",color:"text.secondary",children:"Total Visits"})]})})})]}),(0,R.jsxs)(n.A,{sx:{mt:4,mb:4},children:[(0,R.jsxs)(n.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"space-between",gap:2,mb:2},children:[(0,R.jsxs)(n.A,{children:[(0,R.jsxs)(h.A,{variant:"h6",fontWeight:"bold",sx:{mb:2,display:"flex",alignItems:"center"},children:[(0,R.jsx)(Z.A,{sx:{mr:1}})," Visit History"]}),(0,R.jsxs)(M,{value:O,exclusive:!0,onChange:(e,t)=>{null!==t&&(N(t),Ae(0))},size:"small","aria-label":"time frame",sx:{mb:{xs:2,md:0}},children:[(0,R.jsx)(P,{value:"all","aria-label":"all time",children:"All Time"}),(0,R.jsx)(P,{value:"month","aria-label":"this month",children:"Custom Range"}),(0,R.jsx)(P,{value:"today","aria-label":"today",children:"Today"})]})]}),(0,R.jsxs)(n.A,{sx:{display:"flex",gap:2,flexWrap:"wrap",alignItems:"center"},children:[(0,R.jsx)(L.A,{placeholder:"Search notes...",variant:"outlined",size:"small",value:S,onChange:e=>W(e.target.value),sx:{minWidth:{xs:"100%",sm:200},maxWidth:250,"& .MuiOutlinedInput-root":{borderRadius:2}},InputProps:{startAdornment:(0,R.jsx)(H.A,{position:"start",children:(0,R.jsx)(re.A,{color:"action"})})}}),(0,R.jsxs)(M,{value:I,exclusive:!0,onChange:(e,t)=>{null!==t&&D(t)},size:"small","aria-label":"sort by",children:[(0,R.jsx)(P,{value:"name","aria-label":"sort by name",children:(0,R.jsx)(G.A,{title:"Sort by Check-in",children:(0,R.jsxs)(n.A,{sx:{display:"flex",alignItems:"center"},children:[(0,R.jsx)(ae,{sx:{mr:.5}}),"Check-in"]})})}),(0,R.jsx)(P,{value:"recent","aria-label":"sort by recent",children:(0,R.jsx)(G.A,{title:"Sort by Recent",children:(0,R.jsxs)(n.A,{sx:{display:"flex",alignItems:"center"},children:[(0,R.jsx)(se.A,{sx:{mr:.5}}),"Recent"]})})})]})]})]}),"month"===O&&(0,R.jsxs)(n.A,{sx:{mt:2,display:"flex",flexWrap:"wrap",gap:2},children:[(0,R.jsx)(L.A,{label:"Start Date",type:"date",value:(0,ue.GP)(U.startDate,"yyyy-MM-dd"),onChange:e=>{const t=e.target.value?new Date(e.target.value):ce(new Date);de({...U,startDate:t})},InputLabelProps:{shrink:!0},inputProps:{max:(0,ue.GP)(U.endDate,"yyyy-MM-dd")},size:"small",sx:{width:{xs:"100%",sm:"auto"}}}),(0,R.jsx)(L.A,{label:"End Date",type:"date",value:(0,ue.GP)(U.endDate,"yyyy-MM-dd"),onChange:e=>{const t=e.target.value?new Date(e.target.value):he(new Date);de({...U,endDate:t})},InputLabelProps:{shrink:!0},inputProps:{min:(0,ue.GP)(U.startDate,"yyyy-MM-dd")},size:"small",sx:{width:{xs:"100%",sm:"auto"}}})]})]}),(0,R.jsxs)(n.A,{children:[(0,R.jsxs)(h.A,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:[(0,R.jsx)(q.A,{sx:{mr:1,verticalAlign:"text-bottom"}}),"Visit Records"]}),y?(0,R.jsx)(x.A,{sx:{mt:2,mb:1,borderRadius:1}}):0===ze.length?(0,R.jsx)(n.A,{sx:{p:3,textAlign:"center",backgroundColor:"rgba(0,0,0,0.02)"},children:(0,R.jsx)(h.A,{variant:"body1",color:"text.secondary",children:S?"No visits match your search criteria":"No visit data available "+("today"===O?"today":"month"===O?"in selected date range":"")})}):(0,R.jsx)(V.A,{children:(0,R.jsxs)(F.A,{children:[(0,R.jsx)(E.A,{children:(0,R.jsxs)(X.A,{children:[(0,R.jsx)(_.A,{sx:{fontWeight:"bold"},children:"Check-in"}),(0,R.jsx)(_.A,{sx:{fontWeight:"bold"},children:"Check-out"}),(0,R.jsx)(_.A,{sx:{fontWeight:"bold"},children:"Products Ordered"})]})}),(0,R.jsx)(Y.A,{children:Re.map((t=>[(0,R.jsxs)(X.A,{sx:{"&:hover":{backgroundColor:"rgba(0,0,0,0.04)"}},children:[(0,R.jsx)(_.A,{children:t.checkInTime instanceof Date&&!isNaN(t.checkInTime)?(0,ue.GP)(t.checkInTime,"MMM d, yyyy, h:mm a"):"N/A"}),(0,R.jsx)(_.A,{children:t.checkOutTime instanceof Date&&!isNaN(t.checkOutTime)?(0,ue.GP)(t.checkOutTime,"MMM d, yyyy, h:mm a"):"N/A"}),(0,R.jsx)(_.A,{children:Array.isArray(t.products)&&t.products.length>0?(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(n.A,{sx:{display:"flex",alignItems:"center"},children:[(0,R.jsx)(h.A,{variant:"body2",sx:{mr:1},children:$e[t.id]?"":`${t.products.length} product${t.products.length>1?"s":""}`}),(0,R.jsx)(J.A,{size:"small",onClick:()=>{return e=t.id,void Be((t=>({...t,[e]:!t[e]})));var e},"aria-label":$e[t.id]?"Collapse products":"Expand products",children:$e[t.id]?(0,R.jsx)(ie.A,{}):(0,R.jsx)(ne.A,{})})]})}):"\u2014"})]},t.id),$e[t.id]&&(0,R.jsx)(X.A,{children:(0,R.jsx)(_.A,{colSpan:3,sx:{p:0,background:"rgba(156,39,176,0.03)"},children:(0,R.jsxs)(F.A,{size:"small",sx:{m:1,minWidth:180,bgcolor:"rgba(156,39,176,0.02)",borderRadius:1},children:[(0,R.jsx)(E.A,{children:(0,R.jsxs)(X.A,{children:[(0,R.jsx)(_.A,{sx:{fontWeight:600,color:e.palette.secondary.main,borderBottom:"none",py:.5},children:"Product Name"}),(0,R.jsx)(_.A,{sx:{fontWeight:600,color:e.palette.secondary.main,borderBottom:"none",py:.5},children:"Count"})]})}),(0,R.jsx)(Y.A,{children:t.products.map(((e,t)=>{var r;return(0,R.jsxs)(X.A,{children:[(0,R.jsx)(_.A,{sx:{borderBottom:"none",py:.5},children:(null===(r=B[e.productId])||void 0===r?void 0:r.name)||"Product"}),(0,R.jsx)(_.A,{sx:{borderBottom:"none",py:.5},children:e.count})]},t)}))})]})})},t.id+"-expand")]))})]})})]})]})})})}},3883:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(9992),s=r(579);const i=(0,a.A)((0,s.jsx)("path",{d:"m21.9 8.89-1.05-4.37c-.22-.9-1-1.52-1.91-1.52H5.05c-.9 0-1.69.63-1.9 1.52L2.1 8.89c-.24 1.02-.02 2.06.62 2.88.08.11.19.19.28.29V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-6.94c.09-.09.2-.18.28-.28.64-.82.87-1.87.62-2.89m-2.99-3.9 1.05 4.37c.1.42.01.84-.25 1.17-.14.18-.44.47-.94.47-.61 0-1.14-.49-1.21-1.14L16.98 5zM13 5h1.96l.54 4.52c.05.39-.07.78-.33 1.07-.22.26-.54.41-.95.41-.67 0-1.22-.59-1.22-1.31zM8.49 9.52 9.04 5H11v4.69c0 .72-.55 1.31-1.29 1.31-.34 0-.65-.15-.89-.41-.25-.29-.37-.68-.33-1.07m-4.45-.16L5.05 5h1.97l-.58 4.86c-.08.65-.6 1.14-1.21 1.14-.49 0-.8-.29-.93-.47-.27-.32-.36-.75-.26-1.17M5 19v-6.03c.08.01.15.03.23.03.87 0 1.66-.36 2.24-.95.6.6 1.4.95 2.31.95.87 0 1.65-.36 2.23-.93.59.57 1.39.93 2.29.93.84 0 1.64-.35 2.24-.95.58.59 1.37.95 2.24.95.08 0 .15-.02.23-.03V19z"}),"StorefrontOutlined")}}]);
//# sourceMappingURL=455.37fd0c4f.chunk.js.map