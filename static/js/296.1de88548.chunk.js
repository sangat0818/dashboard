"use strict";(self.webpackChunkbiscuit_admin_dashboard=self.webpackChunkbiscuit_admin_dashboard||[]).push([[296],{3616:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(9992),a=r(579);const i=(0,n.A)((0,a.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt")},3974:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(9992),a=r(579);const i=(0,n.A)((0,a.jsx)("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoney")},9296:(e,t,r)=>{r.r(t),r.d(t,{default:()=>q});var n=r(5043),a=r(267),i=r(3969),s=r(5895),o=r(1244),l=r(6128),d=r(7873),c=r(2097),h=r(4799),x=r(3089),g=r(6154),f=r(3699),u=r(6020),m=r(8259),A=r(7443),p=r(756),j=r(6172),v=r(1341),b=r(4375),y=r(3849),S=r(3759),w=r(6529),I=r(2272),R=r(916),P=r(1449),C=r(9982),M=r(3745),k=r(3898),W=r(7388),T=r(3616),z=r(103),E=r(9992),$=r(579);const N=(0,E.A)((0,$.jsx)("path",{fillRule:"evenodd",d:"M14 6V4h-4v2zM4 8v11h16V8zm16-2c1.11 0 2 .89 2 2v11c0 1.11-.89 2-2 2H4c-1.11 0-2-.89-2-2l.01-11c0-1.11.88-2 1.99-2h4V4c0-1.11.89-2 2-2h4c1.11 0 2 .89 2 2v2z"}),"WorkOutline");var V=r(3974);const F=(0,E.A)((0,$.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp");var D=r(5472),O=r(6860),L=r(8729),_=r(7151),U=r(5180);const G=(e,t)=>{const r=t.filter((t=>t.reportingToId===e));let n=[...r];const a=[];return r.forEach((e=>{if("MarketingStaff"===e.role)a.push(e);else{const r=G(e.id,t);n=[...n,...r.allSubordinates],a.push(...r.marketingStaff)}})),{allSubordinates:n,marketingStaff:a}},H=(e,t)=>t.filter((t=>t.reportingToId===e)).map((e=>{if("MarketingStaff"===e.role)return{...e,hasSubordinates:!1,marketingStaffCount:0};const{marketingStaff:r}=G(e.id,t);return{...e,hasSubordinates:!0,marketingStaffCount:r.length}}));function q(){const e=(0,a.A)(),t=(0,U.Zp)(),{managerId:r}=((0,U.zy)(),(0,U.g)()),{userProfile:E,allUsers:q,loading:Y}=(0,L.A)(),[J,B]=(0,n.useState)(!1),[Z,K]=(0,n.useState)(""),[Q,X]=(0,n.useState)(""),[ee,te]=(0,n.useState)(""),[re,ne]=(0,n.useState)([]),[ae,ie]=(0,n.useState)({open:!1,message:"",severity:"success"}),[se,oe]=(0,n.useState)(0),[le,de]=(0,n.useState)(10),[ce,he]=(0,n.useState)(null),[xe,ge]=(0,n.useState)([]),[fe,ue]=(0,n.useState)(0),[me,Ae]=(0,n.useState)(0),[pe,je]=(0,n.useState)(0),[ve,be]=(0,n.useState)(0);(0,n.useEffect)((()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0);K(t.toISOString().split("T")[0]),X(r.toISOString().split("T")[0])}),[]),(0,n.useEffect)((()=>{q&&q.length>0&&E&&(async()=>{if(r)try{const e=q.find((e=>e.id===r));if(e){he(e);const t=[];e.id;let r=e;for(;r&&(t.unshift(r),r.reportingToId);)r=q.find((e=>e.id===r.reportingToId));ge(t)}else ye()?(he(null),ge([])):(ie({open:!0,message:"Manager not found or you do not have permission to view",severity:"error"}),t("/sales/manager-performance"))}catch(e){console.error("Error setting up manager:",e)}else if(ye())he(null),ge([]);else{const e=null===E||void 0===E?void 0:E.id;if(e){const r=q.find((t=>t.id===e));r&&(he(r),ge([r]),t(`/sales/manager-performance/${e}`))}}})()}),[r,q,E,t]);const ye=()=>!!E&&["Admin","NationalManager"].includes(E.role),Se=(0,n.useMemo)((()=>{if(!E||!q)return[];if(console.log("Current view:",ce?`Manager ${ce.id}`:"Root level"),ce){const e=H(ce.id,q);return console.log(`Found ${e.length} direct subordinates for manager ${ce.id}`),e}if("Admin"===E.role){const e=q.filter((e=>"NationalManager"===e.role&&e.active)).map((e=>{const t=G(e.id,q);return{...e,hasSubordinates:t.allSubordinates.length>0,marketingStaffCount:t.marketingStaff.length}}));return console.log(`Admin view: found ${e.length} National Managers`),e}if("NationalManager"===E.role){const e=H(E.id,q);return console.log(`National Manager view: found ${e.length} subordinates`),e}if("AreaOfficer"===E.role){const e=H(E.id,q);return console.log(`Area Officer view: found ${e.length} subordinates`),e}if("Supervisor"===E.role){const e=H(E.id,q);return console.log(`Supervisor view: found ${e.length} subordinates`),e}return console.log("No accessible managers found for role:",E.role),[]}),[E,q,ce]),we=(0,n.useMemo)((()=>{if(!ee.trim())return Se;const e=ee.toLowerCase();return Se.filter((t=>{var r;return null===(r=t.name)||void 0===r?void 0:r.toLowerCase().includes(e)}))}),[Se,ee]);(0,n.useEffect)((()=>{if(Z&&Q&&!J&&(null===q||void 0===q?void 0:q.length)>0&&(null===Se||void 0===Se?void 0:Se.length)>0){const e=setTimeout((()=>{console.log("Generating report with managers:",Se.length),Ie()}),300);return()=>clearTimeout(e)}}),[Z,Q,q,Se]);const Ie=async()=>{if(Z&&Q){B(!0);try{const t=new Date(Z+"T00:00:00"),r=new Date(Q+"T23:59:59");if(0===we.length)return console.log("No managers found with selected criteria",{userRole:null===E||void 0===E?void 0:E.role,currentManagerId:null===ce||void 0===ce?void 0:ce.id}),ne([]),ie({open:!0,message:"Admin"===(null===E||void 0===E?void 0:E.role)?"No managers found in the system. Please add staff with management roles first.":"No subordinate managers found for your account.",severity:"info"}),void B(!1);console.log(`Generating report for ${we.length} managers`,we);const n=[];let a=0,i=0,s=0;for(const o of we){let l=[];if("MarketingStaff"===o.role)l=[o];else{l=G(o.id,q).marketingStaff}let d=0,c=new Set,h=0,x=0;if(l.length>0){const n=l.map((e=>e.id));i+=l.length;const o=(0,D.P)((0,D.rJ)(O.db,"visits"),(0,D._M)("checkInTime",">=",t),(0,D._M)("checkInTime","<=",r),(0,D.My)("checkInTime","desc"));let g=(await(0,D.GG)(o)).docs.map((e=>({id:e.id,...e.data()})));g=g.filter((e=>n.includes(e.userId))),d=g.length,a+=d,g.forEach((e=>{e.retailerId&&c.add(e.retailerId)}));const f=(0,D.P)((0,D.rJ)(O.db,"productRates")),u=await(0,D.GG)(f),m={};u.forEach((e=>{const t=e.data();t.productId&&t.rate&&(m[t.productId]=parseFloat(t.rate))}));const A=new Set;g.forEach((e=>{e.inventoryEntryId&&A.add(e.inventoryEntryId)}));const p={};if(A.size>0){const e=Array.from(A).map((async e=>{try{const t=await(0,D.x7)((0,D.H9)(O.db,"inventoryEntries",e));t.exists()&&(p[e]=t.data())}catch(t){console.error(`Error fetching inventory entry ${e}:`,t)}}));await Promise.all(e)}for(const t of g)if(Array.isArray(t.products))for(const r of t.products){const n=parseInt(r.count)||0;h+=n;let a=null;if(r.rate)a=parseFloat(r.rate);else if(t.inventoryEntryId&&p[t.inventoryEntryId]){var e;const n=null===(e=p[t.inventoryEntryId].productEntries)||void 0===e?void 0:e.find((e=>e.productId===r.productId));n&&n.rate&&(a=parseFloat(n.rate))}if(null===a&&m[r.productId]&&(a=m[r.productId]),null!==a){x+=n*a}}s+=x}n.push({id:o.id,managerId:o.id,managerName:o.name||"Unknown",managerRole:o.role,teamSize:l.length,totalVisits:d,uniqueRetailers:c.size,totalProducts:h,totalSalesAmount:x,hasSubordinates:o.hasSubordinates||!1,visitsPerStaff:l.length?(d/l.length).toFixed(1):0,salesPerStaff:l.length?(x/l.length).toFixed(2):0,salesPerVisit:d?(x/d).toFixed(2):0})}ue(n.length),Ae(i),je(a),be(s),n.sort(((e,t)=>t.totalSalesAmount-e.totalSalesAmount)),ne(n),0===n.length&&ie({open:!0,message:"No staff performance data found",severity:"info"})}catch(t){console.error("Error generating report:",t),ie({open:!0,message:"Error generating report: "+t.message,severity:"error"})}finally{B(!1)}}else ie({open:!0,message:"Please select a date range",severity:"warning"})},Re=(0,n.useMemo)((()=>{if(!ee.trim())return re;const e=ee.toLowerCase();return re.filter((t=>{var r,n;return(null===(r=t.managerName)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(n=t.name)||void 0===n?void 0:n.toLowerCase().includes(e))}))}),[re,ee]),Pe=Re.slice(se*le,se*le+le),Ce=t=>{switch(t){case"NationalManager":return e.palette.primary.main;case"AreaOfficer":return e.palette.info.main;case"Supervisor":return e.palette.warning.main;default:return e.palette.grey[500]}};return(0,_.nt)(E)?(0,$.jsxs)(i.A,{children:[(0,$.jsx)(o.A,{sx:{borderRadius:2,boxShadow:e.shadows[2],mb:4},children:(0,$.jsxs)(l.A,{sx:{p:3},children:[(0,$.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,$.jsx)(d.A,{sx:{bgcolor:e.palette.primary.light,color:e.palette.primary.contrastText||"#fff",width:48,height:48,mr:2},children:(0,$.jsx)(C.A,{})}),(0,$.jsxs)(i.A,{children:[(0,$.jsx)(s.A,{variant:"h5",fontWeight:"bold",color:"text.primary",children:ce?`${ce.name}'s Team Performance`:"Staff Performance Report"}),(0,$.jsx)(s.A,{variant:"body2",color:"text.secondary",children:ce?`Performance metrics of ${ce.name}'s direct subordinates`:"Performance metrics of managers based on their teams"})]})]}),xe.length>0&&(0,$.jsxs)(i.A,{sx:{mb:3,display:"flex",alignItems:"center",flexWrap:"wrap"},children:[(0,$.jsx)(c.A,{variant:"text",size:"small",onClick:()=>t("/sales/manager-performance"),sx:{mr:1},children:"Home"}),xe.map(((e,r)=>(0,$.jsxs)(n.Fragment,{children:[(0,$.jsx)(s.A,{variant:"body2",color:"text.secondary",sx:{mx:.5},children:">"}),r===xe.length-1?(0,$.jsx)(s.A,{variant:"body2",color:"primary",fontWeight:"medium",children:e.name}):(0,$.jsx)(c.A,{variant:"text",size:"small",onClick:()=>{var r;(r=e)&&r.id?t(`/sales/manager-performance/${r.id}`):t("/sales/manager-performance")},sx:{mr:1},children:e.name})]},e.id)))]}),(0,$.jsx)(h.A,{sx:{p:2,mb:3,borderRadius:2,bgcolor:e.palette.info.light,color:e.palette.info.contrastText},children:(0,$.jsxs)(s.A,{variant:"body2",fontWeight:500,children:[(0,$.jsx)("strong",{children:"How to use:"})," Click on any manager row to drill down and see their subordinates' performance.",ce?" Use the breadcrumb navigation above to go back up the hierarchy.":""]})}),(0,$.jsx)(h.A,{sx:{p:2,mb:4,borderRadius:2},children:(0,$.jsxs)(x.A,{container:!0,spacing:2,alignItems:"center",children:[(0,$.jsx)(x.A,{item:!0,xs:12,md:4,children:(0,$.jsx)(g.A,{label:"Search Manager",type:"text",size:"small",fullWidth:!0,value:ee,onChange:e=>te(e.target.value),InputProps:{startAdornment:(0,$.jsx)(f.A,{position:"start",children:(0,$.jsx)(M.A,{sx:{color:e.palette.primary.main}})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),(0,$.jsx)(x.A,{item:!0,xs:12,md:3,children:(0,$.jsx)(g.A,{label:"Start Date",type:"date",size:"small",fullWidth:!0,value:Z,onChange:e=>K(e.target.value),InputLabelProps:{shrink:!0},InputProps:{startAdornment:(0,$.jsx)(f.A,{position:"start",children:(0,$.jsx)(k.A,{sx:{color:e.palette.primary.main}})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),(0,$.jsx)(x.A,{item:!0,xs:12,md:3,children:(0,$.jsx)(g.A,{label:"End Date",type:"date",size:"small",fullWidth:!0,value:Q,onChange:e=>X(e.target.value),InputLabelProps:{shrink:!0},InputProps:{startAdornment:(0,$.jsx)(f.A,{position:"start",children:(0,$.jsx)(W.A,{sx:{color:e.palette.primary.main}})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),(0,$.jsx)(x.A,{item:!0,xs:12,md:2,children:(0,$.jsxs)(i.A,{sx:{display:"flex",gap:1},children:[(0,$.jsx)(c.A,{variant:"contained",onClick:Ie,disabled:J,startIcon:(0,$.jsx)(T.A,{}),sx:{borderRadius:"2rem",bgcolor:e.palette.primary.main,"&:hover":{bgcolor:e.palette.primary.dark}},children:"Apply Filters"}),(0,$.jsx)(c.A,{variant:"outlined",onClick:()=>{if(0===re.length)return void ie({open:!0,message:"No data to export",severity:"warning"});const e=re.map((e=>[e.managerName,e.managerRole,e.teamSize,e.totalVisits,e.uniqueRetailers,e.totalProducts,e.totalSalesAmount.toFixed(2),e.visitsPerStaff,e.salesPerStaff,e.salesPerVisit]));let t=["Manager Name","Role","Team Size","Total Visits","Unique Retailers","Total Products","Total Sales Amount","Visits Per Staff","Sales Per Staff","Sales Per Visit"].join(",")+"\n";e.forEach((e=>{const r=e.map((e=>"string"===typeof e&&(e.includes(",")||e.includes('"'))?`"${e.replace(/"/g,'""')}"`:e));t+=r.join(",")+"\n"})),t=`Staff Performance Report\nDate Range: ${Z} to ${Q}\n\n`+t;const r=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(r),a=document.createElement("a");a.href=n,a.setAttribute("download",`manager_performance_${Z}_${Q}.csv`),document.body.appendChild(a),a.click(),document.body.removeChild(a)},disabled:J||0===re.length,startIcon:(0,$.jsx)(z.A,{}),sx:{borderRadius:"2rem",borderColor:e.palette.primary.main,color:e.palette.primary.main,"&:hover":{borderColor:e.palette.primary.dark}},children:"Export CSV"})]})})]})}),(0,$.jsx)(i.A,{sx:{mb:4},children:(0,$.jsxs)(x.A,{container:!0,spacing:3,children:[(0,$.jsx)(x.A,{item:!0,xs:12,sm:6,md:3,children:(0,$.jsxs)(h.A,{elevation:0,sx:{p:2,borderRadius:2,bgcolor:e.palette.primary.light,color:e.palette.primary.contrastText,textAlign:"center",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,$.jsx)(s.A,{variant:"h3",sx:{fontWeight:700,mb:1},children:fe}),(0,$.jsx)(s.A,{variant:"body1",children:"Active Managers"})]})}),(0,$.jsx)(x.A,{item:!0,xs:12,sm:6,md:3,children:(0,$.jsxs)(h.A,{elevation:0,sx:{p:2,borderRadius:2,bgcolor:e.palette.info.light,color:e.palette.info.contrastText,textAlign:"center",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,$.jsx)(s.A,{variant:"h3",sx:{fontWeight:700,mb:1},children:me}),(0,$.jsx)(s.A,{variant:"body1",children:"Marketing Staff"})]})}),(0,$.jsx)(x.A,{item:!0,xs:12,sm:6,md:3,children:(0,$.jsxs)(h.A,{elevation:0,sx:{p:2,borderRadius:2,bgcolor:e.palette.warning.light,color:e.palette.warning.contrastText,textAlign:"center",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,$.jsx)(s.A,{variant:"h3",sx:{fontWeight:700,mb:1},children:pe}),(0,$.jsx)(s.A,{variant:"body1",children:"Total Visits"})]})}),(0,$.jsx)(x.A,{item:!0,xs:12,sm:6,md:3,children:(0,$.jsxs)(h.A,{elevation:0,sx:{p:2,borderRadius:2,bgcolor:e.palette.success.light,color:e.palette.success.contrastText,textAlign:"center",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,$.jsxs)(s.A,{variant:"h3",sx:{fontWeight:700,mb:1},children:["\u20b9",ve.toFixed(2)]}),(0,$.jsx)(s.A,{variant:"body1",children:"Total Sales Amount"})]})})]})}),J?(0,$.jsxs)(i.A,{sx:{mb:2},children:[(0,$.jsx)(u.A,{}),(0,$.jsx)(m.A,{children:(0,$.jsxs)(A.A,{children:[(0,$.jsx)(p.A,{children:(0,$.jsxs)(j.A,{children:[(0,$.jsx)(v.A,{sx:{fontWeight:"bold"},children:"Manager/Staff"}),(0,$.jsx)(v.A,{sx:{fontWeight:"bold",textAlign:"center"},children:"Role"}),(0,$.jsx)(v.A,{sx:{fontWeight:"bold",textAlign:"center"},children:"Team Size"}),(0,$.jsx)(v.A,{sx:{fontWeight:"bold",textAlign:"center"},children:"Total Visits"}),(0,$.jsx)(v.A,{sx:{fontWeight:"bold",textAlign:"center"},children:"Retailers Reached"}),(0,$.jsx)(v.A,{sx:{fontWeight:"bold",textAlign:"right"},children:"Total Sales (\u20b9)"}),(0,$.jsx)(v.A,{sx:{fontWeight:"bold",textAlign:"center"},children:"Actions"})]})}),(0,$.jsx)(b.A,{children:[...Array(5)].map(((e,t)=>(0,$.jsxs)(j.A,{children:[(0,$.jsx)(v.A,{children:(0,$.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,$.jsx)(y.A,{variant:"circular",width:36,height:36,sx:{mr:1.5}}),(0,$.jsx)(y.A,{variant:"text",width:120})]})}),(0,$.jsx)(v.A,{align:"center",children:(0,$.jsx)(y.A,{variant:"text",width:80})}),(0,$.jsx)(v.A,{align:"center",children:(0,$.jsx)(y.A,{variant:"text",width:60})}),(0,$.jsx)(v.A,{align:"center",children:(0,$.jsx)(y.A,{variant:"text",width:60})}),(0,$.jsx)(v.A,{align:"center",children:(0,$.jsx)(y.A,{variant:"text",width:60})}),(0,$.jsx)(v.A,{align:"right",children:(0,$.jsx)(y.A,{variant:"text",width:80})}),(0,$.jsx)(v.A,{align:"center",children:(0,$.jsx)(y.A,{variant:"rounded",width:80,height:24})})]},t)))})]})})]}):0===re.length?(0,$.jsx)(i.A,{sx:{textAlign:"center",p:4,bgcolor:"rgba(0,0,0,0.02)",borderRadius:2},children:(0,$.jsx)(s.A,{variant:"body1",color:"text.secondary",children:"No staff performance data found for the selected criteria"})}):(0,$.jsxs)(m.A,{children:[(0,$.jsxs)(A.A,{children:[(0,$.jsx)(p.A,{children:(0,$.jsxs)(j.A,{children:[(0,$.jsx)(v.A,{sx:{fontWeight:"bold"},children:"Manager/Staff"}),(0,$.jsx)(v.A,{sx:{fontWeight:"bold",textAlign:"center"},children:"Role"}),(0,$.jsx)(v.A,{sx:{fontWeight:"bold",textAlign:"center"},children:"Team Size"}),(0,$.jsx)(v.A,{sx:{fontWeight:"bold",textAlign:"center"},children:"Total Visits"}),(0,$.jsx)(v.A,{sx:{fontWeight:"bold",textAlign:"center"},children:"Retailers Reached"}),(0,$.jsx)(v.A,{sx:{fontWeight:"bold",textAlign:"right"},children:"Total Sales (\u20b9)"}),(0,$.jsx)(v.A,{sx:{fontWeight:"bold",textAlign:"center"},children:"Efficiency"})]})}),(0,$.jsx)(b.A,{children:0===Pe.length?(0,$.jsx)(j.A,{children:(0,$.jsx)(v.A,{colSpan:7,align:"center",children:(0,$.jsx)(s.A,{variant:"body2",color:"text.secondary",children:"No matching results found"})})}):Pe.map((r=>{var n;return(0,$.jsxs)(j.A,{sx:{"&:hover":{bgcolor:"rgba(0,0,0,0.04)"}},onClick:()=>(e=>{console.log("Drilling down into manager:",e),"MarketingStaff"===(e.managerRole||e.role)?t(`/sales/staff/${e.id||e.managerId}/details`):e.hasSubordinates?t(`/sales/manager-performance/${e.id||e.managerId}`):ie({open:!0,message:"This manager has no subordinates to display",severity:"info"})})(r),style:{cursor:"pointer"},children:[(0,$.jsx)(v.A,{children:(0,$.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,$.jsx)(d.A,{sx:{width:36,height:36,mr:1.5,bgcolor:Ce(r.managerRole||r.role)},children:(null===(n=r.managerName)||void 0===n?void 0:n.charAt(0))||"?"}),(0,$.jsxs)(i.A,{children:[(0,$.jsx)(s.A,{variant:"body2",fontWeight:500,children:r.managerName}),r.hasSubordinates&&(0,$.jsx)(s.A,{variant:"caption",color:"text.secondary",children:"Click to view subordinates"})]})]})}),(0,$.jsx)(v.A,{align:"center",children:(0,$.jsx)(S.A,{label:r.managerRole||r.role,size:"small",sx:{borderRadius:"14px",fontWeight:500,bgcolor:`${Ce(r.managerRole||r.role)}20`,color:Ce(r.managerRole||r.role)}})}),(0,$.jsx)(v.A,{align:"center",children:(0,$.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,$.jsx)(N,{sx:{color:e.palette.info.main,fontSize:16,mr:.5}}),(0,$.jsx)(s.A,{variant:"body2",fontWeight:500,children:r.teamSize})]})}),(0,$.jsx)(v.A,{align:"center",children:(0,$.jsx)(s.A,{variant:"body2",fontWeight:500,children:r.totalVisits})}),(0,$.jsx)(v.A,{align:"center",children:(0,$.jsx)(s.A,{variant:"body2",fontWeight:500,children:r.uniqueRetailers})}),(0,$.jsx)(v.A,{align:"right",children:(0,$.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[(0,$.jsx)(V.A,{sx:{color:e.palette.success.main,fontSize:18,mr:.5}}),(0,$.jsx)(s.A,{variant:"body2",fontWeight:500,children:r.totalSalesAmount.toFixed(2)})]})}),(0,$.jsx)(v.A,{align:"center",children:(0,$.jsx)(w.A,{title:(0,$.jsxs)(i.A,{children:[(0,$.jsx)(s.A,{variant:"caption",fontWeight:600,children:"Efficiency Metrics:"}),(0,$.jsx)(i.A,{sx:{mt:.5},children:(0,$.jsxs)(s.A,{variant:"caption",children:["\u2022 ",r.visitsPerStaff," visits per staff"]})}),(0,$.jsx)(i.A,{children:(0,$.jsxs)(s.A,{variant:"caption",children:["\u2022 \u20b9",r.salesPerStaff," sales per staff"]})}),(0,$.jsx)(i.A,{children:(0,$.jsxs)(s.A,{variant:"caption",children:["\u2022 \u20b9",r.salesPerVisit," sales per visit"]})})]}),arrow:!0,children:(0,$.jsx)(S.A,{icon:(0,$.jsx)(F,{sx:{fontSize:16}}),label:`\u20b9${r.salesPerStaff}`,color:parseFloat(r.salesPerStaff)>1e3?"success":"default",size:"small",sx:{borderRadius:"14px",fontWeight:500,minWidth:"80px"}})})})]},r.managerId)}))})]}),(0,$.jsx)(I.A,{rowsPerPageOptions:[10,25,50],component:"div",count:Re.length,rowsPerPage:le,page:se,onPageChange:(e,t)=>{oe(t)},onRowsPerPageChange:e=>{de(parseInt(e.target.value,10)),oe(0)}})]})]})}),(0,$.jsx)(R.A,{open:ae.open,autoHideDuration:6e3,onClose:()=>ie({...ae,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,$.jsx)(P.A,{onClose:()=>ie({...ae,open:!1}),severity:ae.severity,sx:{width:"100%"},children:ae.message})})]}):(0,$.jsx)(i.A,{sx:{p:4,textAlign:"center"},children:(0,$.jsx)(s.A,{variant:"h6",color:"error",children:"You are not authorized to view staff performance reports."})})}}}]);
//# sourceMappingURL=296.1de88548.chunk.js.map